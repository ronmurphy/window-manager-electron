<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self' https: http: data: 'unsafe-inline' 'unsafe-eval'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:;">
    <title>Window Manager</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0">
</head>

<body>
    <div class="control-stack"></div>
    <!-- Choice menu -->
    <div class="choice-menu" id="choiceMenu">
        <button id="toggleDockBtn">
            <span class="material-symbols-outlined">web_asset</span>
            Open Windows
            <span class="window-counter" id="menuWindowCounter">0</span>
        </button>
        <div class="separator"></div>
        <button id="openFileBtn">
            <span class="material-symbols-outlined">folder_open</span>
            Open Local File
        </button>
        <button id="openUrlBtn">
            <span class="material-symbols-outlined">link</span>
            Open URL
        </button>
        <div class="separator"></div>
    </div>

    <div id="moduleImportModal" class="modal">
        <div class="modal-content">
            <h2>Add New Widgets</h2>
            <div class="import-tabs">
                <button class="tab-btn active" data-tab="local">Local File</button>
                <button class="tab-btn" data-tab="widget">Built-in Widgets</button>
            </div>
            <div class="tab-content active" id="localTab">
                <div class="form-group">
                    <label>Widget Name</label>
                    <input type="text" id="moduleName" placeholder="Enter module name">
                </div>
                <div class="form-group">
                    <label>Category</label>
                    <input type="text" id="moduleCategory" placeholder="e.g., Widgets, Tools, References">
                </div>
                <div class="form-group">
                    <label>Widget File</label>
                    <input type="file" id="moduleFile" accept=".html,.js">
                </div>
            </div>
            <div class="tab-content" id="widgetTab">
                <div class="widget-list">

                </div>
                <div class="widget-scan-section">
                    <button id="scanFolderBtn" class="scan-btn">
                        <span class="material-symbols-outlined">folder_open</span>
                        Scan Folder for Widgets
                    </button>
                    <p class="hint-text">Select a folder containing widget directories to import them</p>
                </div>
            </div>
            <div class="modal-actions">
                <button id="importModuleBtn">Add Widget</button>
                <button id="cancelImportBtn">Cancel</button>
            </div>
        </div>
    </div>

    <!-- URL input dialog -->
    <div id="urlInputModal" class="url-input-modal">
        <input type="text" id="urlInput" class="url-input" placeholder="Enter URL (e.g., https://example.com)" />
        <button class="modal-btn" id="openUrlConfirmBtn">Open</button>
        <button class="modal-btn" id="openUrlCancelBtn">Cancel</button>
    </div>

    <!-- Hidden file input -->
    <input type="file" id="filePicker" accept=".html,.htm" style="display: none;">

    <!-- Theme handler save -->
    <div id="themeNameModal" class="modal">
        <div class="modal-content">
            <h2>Save Theme</h2>
            <div class="form-group">
                <label>Theme Name</label>
                <input type="text" id="themeNameInput" placeholder="Enter theme name">
            </div>
            <div class="modal-actions">
                <button id="saveThemeBtn" class="action-button">Save</button>
                <button id="cancelThemeBtn" class="secondary-button">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Wallpaper prompt -->
    <!-- Update the wallpaper URL modal -->
    <div id="wallpaperUrlModal" class="modal">
        <div class="modal-content">
            <h2>Add Online Wallpaper</h2>
            <div class="form-group">
                <label>Image URL</label>
                <input type="url" id="wallpaperUrlInput" placeholder="Enter image URL (https://...)">
                <button id="previewWallpaperBtn" class="secondary-button mt-2">
                    <span class="material-symbols-outlined">preview</span>
                    Preview Image
                </button>
            </div>
            <div id="wallpaperPreview" class="wallpaper-preview"></div>
            <div class="modal-actions">
                <button id="addWallpaperBtn" class="action-button" disabled>
                    <span class="material-symbols-outlined">add_to_photos</span>
                    Add to System
                </button>
                <button id="cancelWallpaperBtn" class="secondary-button">Cancel</button>
            </div>
        </div>
    </div>

    <div class="dock hidden" id="dock"></div>

    <!--Module Manager.js-->
    <script src="moduleManager.js"></script>

    <!-- Theme Manager.js -->
    <script src="themeManager.js"></script>

    <!-- Terminal Manager.js -->
    <script src="terminalManager.js"></script>

    <!-- CodeManager.js -->
    <script src="codeManager.js"></script>

    <!-- FileManager -->
    <script src="fileManager.js"></script>

    <!-- colorExtractor -->
    <script src="colorExtractor.js"></script>

    <!-- Important: Load renderer.js at the end of body -->
    <script src="renderer.js"></script>
</body>

</html>